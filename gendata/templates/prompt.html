{% extends 'base.html' %}

{% block content %}
    <main id="main">
        <section id="gendata" class="about">
            <div class="pt-3 container" data-aos="fade-up">
                <div class="row gx-0">
                    <div class="col-lg-6 d-flex flex-column justify-content-center mr-3" data-aos="fade-up" data-aos-delay="200">
                        <div class="content" style="height: 100%;">
                            <h3>RSA Prompt</h3>
                            <h2>RSA Ads Generated by ChatGPT</h2>
                            <p>
                                Create RSA with unique headlines and descriptions, include the CTAs.
                            </p>
                            <form class="row g-3" action="{% url 'gendata:rsa' %}" method="POST">
                                {% csrf_token %}
                                <div class="form-outline">
                                    <label class="form-label" for="textAreaExample">Product</label>
                                    <textarea class="form-control" id="rsa-product" rows="5" name="rsa-product" style="resize: none;" required placeholder="Enter your product details"></textarea>
                                </div>
                                <div class="form-outline">
                                    <label class="form-label" for="textAreaExample">CTA</label>
                                    <input class="form-control" id="rsa-cta" name="rsa-cta" required></input>
                                </div>
                                <div class="form-outline">
                                    <label class="form-label" for="textAreaExample">Final URL</label>
                                    <input class="form-control" id="rsa-finalurl" name="rsa-finalurl" style="resize: none;" required></input>
                                </div>
                                <div class="form-outline">
                                    <label class="form-label" for="textAreaExample">Tone</label>
                                    <div >
                                        <select class="form-select" aria-label="Default select example" id='rsa-tone' name='rsa-tone'>
                                          <option selected="professional">Professional</option>
                                          <option value="helpful">Helpful</option>
                                          <option value="informative">Informative</option>
                                          <option value="persuative">Persuative</option>
                                          <option value="friendly">Friendly</option>
                                          <option value="humorous">Humorous</option>
                                          <option value="humorous">Inspiring</option>
                                          <option value="casual">Casual</option>
                                          <option value="luxurious">Luxurious</option>
                                          <option value="sophisticated">Sophisticated</option>
                                          <option value="technical">Technical</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-outline">
                                    <label class="form-label" for="textAreaExample">Audience</label>
                                    <div >
                                        <select class="form-select" aria-label="Default select example" id='rsa-audience' name='rsa-audience'>
                                            <option selected="young-adults">Young Adults</option>
                                            <option value="professionals">Professionals</option>
                                            <option value="parents">Parents</option>
                                            <option value="seniors">Seniors</option>
                                            <option value="students">Students</option>
                                            <option value="homeowners">Homeowners</option>
                                            <option value="entrepreneurs">Entrepreneurs</option>
                                            <option value="tech-enthusiasts">Tech Enthusiasts</option>
                                            <option value="fitness-enthusiasts">Fitness Enthusiasts</option>
                                            <option value="health-conscious-consumers">Health-Conscious Consumers</option>
                                            <option value="environmentally-conscious-consumers">Environmentally Conscious Consumers</option>
                                            <option value="luxury-shoppers">Luxury Shoppers</option>
                                            <option value="budget-shoppers">Budget Shoppers</option>
                                            <option value="travel-enthusiasts">Travel Enthusiasts</option>
                                            <option value="pet-owners">Pet Owners</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-outline">
                                    <label class="form-label" for="textAreaExample">Case</label>
                                    <input class="form-control" id="rsa-case" name="rsa-case" style="resize: none;" required></input>
                                </div>
                                <div class="col-12">
                                    <button id="btn-rsa" class="btn btn-primary">Generate</button>
                                </div>
                            </form>
        </div>
    </div>
    {% comment %} <div class="col-lg-6 d-flex flex-column justify-content-center ml-3" data-aos="fade-up" data-aos-delay="200">
        <div class="content" style="height: 750px;">
            <h3>Sitelink Extensions Prompt</h3>
            <h2>Google Ads sitelink extensions by ChatGPT</h2>
            <p>
                Create Google Ads sitelink with unique headlines and descriptions.
            </p>
            <form class="row g-3" method="POST">
                {% csrf_token %}
                <div class="form-outline">
                    <label class="form-label" for="textAreaExample">Product</label>
                    <textarea class="form-control" id="sl-product" rows="5" name="sl-product" style="resize: none;" required placeholder="Product"></textarea>
                </div>
                <br/>
                <div class="form-outline">
                    <label class="form-label" for="textAreaExample">Tone</label>
                    <input class="form-control" id="sl-tone" name="sl-tone" style="resize: none;" required></input>
                </div>
                <br/>
                <div class="form-outline">
                    <label class="form-label" for="textAreaExample">Final URLs</label>
                    <textarea class="form-control" id="sl-urls" rows="3" name="sl-urls" style="resize: none;" required></textarea>
                </div>
                <br/>


                <div class="col-12">
                    <button id="btn-sl" class="btn btn-primary">Generate</button>
                </div>
            </form>
        </div>
    </div> {% endcomment %}
</div>
</div>
</section>
        </main>
                <style>.mr10 {
    margin-right: 10px;
}</style><script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script><script>// $("#btn-rsa").click(function (){
// var prompt = $('#rsa_prompt').val();
// console.log(prompt)
// $.ajax{}
// })


var $rsa_table = $('#rsa_table')
var $site_table = $('#site_table')

function buildTable($el, rows) {
    var headlines = 15
    var descriptions = 4
    var rows = rows
    var i
    var j
    var row
    var columns = [{
            field: 'state',
            valign: 'middle'
        }]
    var data = []

    for (i = 0; i < headlines; i++) {
        columns.push({
            field: 'field' + i,
            title: 'Headline' + (
                i + 1
            ),
            sortable: true,
            valign: 'middle',
            formatter: function (val) {
                return '<div class="item">' + val + '</div>'
            },
            events: {
                'click .item': function () {
                    console.log('click')
                }
            }
        })
    }

    for (i = 0; i < descriptions; i++) {
        columns.push({
            field: 'field' + i,
            title: 'Description' + (
                i + 1
            ),
            sortable: true,
            valign: 'middle',
            formatter: function (val) {
                return '<div class="item">' + val + '</div>'
            },
            events: {
                'click .item': function () {
                    console.log('click')
                }
            }
        })
    }

    columns.push({
        field: 'field14',
        title: 'Action',
        valign: 'middle',
        formatter: function (val) {
            return '<a class="btn btn-primary"> Delete </a>'
        }
    })

    for (i = 0; i < rows; i++) {
        row = {}
        for (j = 0; j < headlines + descriptions; j++) {
            row['field' + j] = 'Row-' + i + '-' + j
        }
        data.push(row)
    }
    $el.bootstrapTable('destroy').bootstrapTable({
        height: $('#height').prop('checked') ? 400 : undefined,
        columns: columns,
        data: data,
        search: true,
        showColumns: true,
        showToggle: true,
        clickToSelect: true,
        fixedColumns: true,
        fixedNumber: 2,
        fixedRightNumber: 1
    })
}

$(function () {
    var csrftoken = jQuery("[name=csrfmiddlewaretoken]").val();

    buildTable($rsa_table, 1)
    // buildTable($site_table)

    $('#build').click(function () {
        buildTable($rsa_table, 1)
    })

    {% comment %} $('#btn-rsa').click(function (e) {
        e.preventDefault();

        var rsa_product = $('#rsa-product').val();
        var rsa_tone = $('#rsa-tone').val();
        var rsa_cta = $('#rsa-cta').val();
        var rsa_target = $('#rsa-target').val();
        var rsa_case = $('#rsa-case').val();

        $.ajax({
            type: "POST",
            url: "/rsa",
            headers: {
                "X-CSRFToken": csrftoken
            },
            data: {
                'type': 'rsa',
                'rsa_product': rsa_product,
                'rsa_tone': rsa_tone,
                'rsa_cta': rsa_cta,
                'rsa_target': rsa_target,
                'rsa_case': rsa_case
            },
            success: function (data) {
                console.log(data)

            }
        });
    }) {% endcomment %}

    $('#btn-sl').click(function (e) {
        e.preventDefault();

        var rsa_product = $('#sl-product').val();
        var rsa_tone = $('#sl-tone').val();
        var rsa_cta = $('#sl-cta').val();
        var rsa_target = $('#sl-target').val();
        var rsa_case = $('#sl-case').val();

        $.ajax({
            type: "POST",
            url: "/rsa",
            headers: {
                "X-CSRFToken": csrftoken
            },
            data: {
                'type': 'sl',
                'sl_product': sl_product,
                'sl_tone': sl_tone,
                'sl_urls': sl_urls
            },
            success: function (data) {
                console.log(data)

            }
        });
    })

    // $('#rsa_table tbody tr').each(function(index) {
    // $(this).find('td:nth-child(1)').text(index + 1);
    // });
})</script>{% endblock %}
